"use strict";(globalThis.webpackChunkwoo_product_tabs=globalThis.webpackChunkwoo_product_tabs||[]).push([[371],{451:(e,t,a)=>{a.d(t,{o:()=>s});var r=a(307);a(362),a(666),a(387);const s=(0,r.createContext)(window.wptAppLocalizer)},371:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var r=a(307),s=a(387),c=a(845),l=a(451);const o=()=>{const e=(0,r.useContext)(l.o),__=wp.i18n.__,t=(0,s.v9)((e=>e.settings)),a=(0,s.I0)(),[o,n]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[d,i]=(0,r.useState)(!1),[p,b]=(0,r.useState)(null),[w,g]=(0,r.useState)(null);return(0,r.useEffect)((()=>{(async()=>{if(t.consumer_key&&t.consumer_secret)return n(t.consumer_key),void u(t.consumer_secret);i(!0),await fetch(`${e.apiURL}/wpt/v1/settings`).then((e=>e.json())).then((e=>{if(!e.data.consumer_key||!e.data.consumer_secret)throw new Error("error");a((0,c.zQ)(e.data)),n(e.data.consumer_key),u(e.data.consumer_secret)})).catch((e=>console.log(e))),i(!1)})()}),[]),(0,r.createElement)("div",{className:"w-full max-w-4xl mx-auto"},(0,r.createElement)("h1",{className:"!text-xl font-semibold py-4"},__("Welcome to Woocommerce product tab ðŸš€","woo-product-tab")),(0,r.createElement)("div",{className:"mt-4"},(0,r.createElement)("div",{className:"relative"},(0,r.createElement)("div",{className:"w-full bg-white rounded shadow p-4 space-y-4"},(0,r.createElement)("div",{className:"mb-6"},(0,r.createElement)("span",{className:"text-gray-800"},__("See the","woo-product-tab")," ",(0,r.createElement)("a",{href:"https://woocommerce.com/document/woocommerce-rest-api/",className:"text-blue-600"},__("Guide","woo-product-tab"))," ",__("htmlFor how to generate consumer_key and consumer_secret","woo-product-tab"))),(0,r.createElement)("div",{className:"mb-6"},(0,r.createElement)("label",{htmlFor:"consumer_key",className:"block mb-2 text-sm text-gray-900 font-semibold capitalize"},"consumer_key"),(0,r.createElement)("input",{type:"text",id:"consumer_key",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"consumer_key",value:o,onChange:e=>n(e.target.value),required:!0})),(0,r.createElement)("div",{className:"mb-6"},(0,r.createElement)("label",{htmlFor:"consumer_secret",className:"block mb-2 text-sm text-gray-900 font-semibold capitalize"},"consumer_secret"),(0,r.createElement)("input",{type:"text",id:"consumer_secret",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"consumer_secret",value:m,onChange:e=>u(e.target.value),required:!0})),p?(0,r.createElement)("div",{className:"mt-6"},(0,r.createElement)("span",{className:"text-red-600"},p)):null,w?(0,r.createElement)("div",{className:"mt-6"},(0,r.createElement)("span",{className:"text-green-600"},w)):null,(0,r.createElement)("button",{onClick:t=>{t.preventDefault(),i(!0),b(null),g(null);let r=new FormData;r.append("consumer_key",o||""),r.append("consumer_secret",m||""),fetch(`${e.apiURL}/wpt/v1/settings`,{method:"post",body:r}).then((e=>e.json())).then((e=>{if(500==e.status)throw e;a((0,c.zQ)(e.data)),g("Mission complete")})).catch((e=>{b(e.text)})).finally((()=>{i(!1)}))},type:"submit",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center"},__("Submit","woo-product-tab"))),d?(0,r.createElement)("div",{className:"absolute w-full h-full top-0 left-0 grid place-items-center bg-white/30"},(0,r.createElement)("span",{className:"block text-green-500 animate-spin"},(0,r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",style:{fill:"currentcolor"}},(0,r.createElement)("path",{d:"M12 22c5.421 0 10-4.579 10-10h-2c0 4.337-3.663 8-8 8s-8-3.663-8-8c0-4.336 3.663-8 8-8V2C6.579 2 2 6.58 2 12c0 5.421 4.579 10 10 10z"})))):null)))}}}]);